[mysqld]
# 基础配置
port = 3306                                   # MySQL服务监听端口
bind-address = 0.0.0.0                        # 允许所有IP地址连接
character-set-server = utf8mb4                # 服务器字符集
collation-server = utf8mb4_unicode_ci         # 服务器排序规则
default_storage_engine = InnoDB               # 默认存储引擎

# 目录设置
datadir = /var/lib/mysql                      # 数据文件存储目录
socket = /var/lib/mysql/mysql.sock            # Unix套接字文件位置
pid-file = /var/run/mysqld/mysqld.pid         # 进程ID文件位置

# 连接设置
max_connections = 150                         # 最大并发连接数
max_connect_errors = 100                      # 最大连接错误次数
interactive_timeout = 1800                    # 交互式连接超时时间(秒)
wait_timeout = 1800                           # 非交互式连接超时时间(秒)

# 缓冲区设置
key_buffer_size = 64M                        # MyISAM表索引缓冲区大小
sort_buffer_size = 1M                        # 排序缓冲区大小
read_buffer_size = 1M                        # 随机读取缓冲区大小
read_rnd_buffer_size = 1M                    # 随机读取缓冲区大小
join_buffer_size = 1M                        # 连接缓冲区大小

# InnoDB设置
innodb_buffer_pool_size = 1G                 # InnoDB缓冲池大小，建议为总内存的50%
innodb_buffer_pool_instances = 1             # InnoDB缓冲池实例数量
innodb_file_per_table = 1                    # 每个表使用独立的表空间文件
innodb_flush_log_at_trx_commit = 1           # 事务提交时刷新日志，1最安全
innodb_log_buffer_size = 8M                  # 日志缓冲区大小
innodb_log_file_size = 128M                  # 日志文件大小
innodb_write_io_threads = 2                  # 写入I/O线程数
innodb_read_io_threads = 2                   # 读取I/O线程数
innodb_flush_method = O_DIRECT               # 文件系统缓存方式，O_DIRECT绕过系统缓存

# 日志设置
slow_query_log = 1                           # 启用慢查询日志
slow_query_log_file = /var/log/mysql/mysql-slow.log  # 慢查询日志文件位置
long_query_time = 2                          # 慢查询阈值(秒)
log_error = /var/log/mysql/error.log         # 错误日志文件位置

# 二进制日志
log_bin = mysql-bin                          # 启用二进制日志
expire_logs_days = 7                         # 二进制日志过期天数
max_binlog_size = 100M                       # 单个二进制日志文件最大大小
binlog_format = ROW                          # 二进制日志格式，ROW格式最安全
sync_binlog = 1                              # 每次事务提交后同步二进制日志，1最安全

[client]
default-character-set = utf8mb4              # 客户端默认字符集

[mysql]
default-character-set = utf8mb4              # mysql命令行工具默认字符集